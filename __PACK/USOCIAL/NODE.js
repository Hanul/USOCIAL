USOCIAL.INSTAGRAM_ACCESS_TOKEN=METHOD({run:function(e,t){"use strict";var r,n=e.redirectURI,o=e.code;POST({isSecure:!0,host:"api.instagram.com",uri:"oauth/access_token",paramStr:r="client_id="+encodeURIComponent(NODE_CONFIG.USOCIAL.Instagram.clientId)+"&client_secret="+encodeURIComponent(NODE_CONFIG.USOCIAL.Instagram.clientSecret)+"&grant_type=authorization_code&redirect_uri="+encodeURIComponent(n)+"&code="+encodeURIComponent(o),headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":Buffer.byteLength(r)}},function(e){t(PARSE_STR(e))})}}),USOCIAL.INSTAGRAM_GET_USER_DATA=METHOD({run:function(e,t){"use strict";var r,n;CHECK_IS_DATA(e)!==!0?n=e:(r=params.userId,n=params.accessToken),GET({isSecure:!0,host:"api.instagram.com",uri:"v1/users/"+(void 0===r?"self":r),paramStr:"access_token="+n},function(e){t(PARSE_STR(e).data)})}}),USOCIAL.TWITTER_ACCESS_TOKEN=METHOD({run:function(e,t){"use strict";var r=e.token,n=e.verifier;UOAUTH.GET_TOKEN({url:"https://api.twitter.com/oauth/access_token",method:"POST",consumerKey:NODE_CONFIG.USOCIAL.Twitter.consumerKey,consumerSecret:NODE_CONFIG.USOCIAL.Twitter.consumerSecret,token:r,verifier:n},t)}}),USOCIAL.TWITTER_DOWNLOAD_PROFILE_IMAGE=METHOD(function(){"use strict";var e=require("http"),t=require("url");return{run:function(r,n){var o,s,c,u=r.url,i=r.path,a=t.parse(u);void 0!==n&&(CHECK_IS_DATA(n)!==!0?o=n:(o=n.success,s=n.error)),c=e.get({hostname:a.hostname===TO_DELETE?void 0:a.hostname,path:a.pathname===TO_DELETE?void 0:a.pathname,agent:new e.Agent({keepAlive:!0})},function(e){var t;301===e.statusCode||302===e.statusCode?(DOWNLOAD({url:e.headers.location,path:i},{success:o,error:s}),e.destroy()):(t=[],e.on("data",function(e){t.push(e)}),e.on("end",function(){WRITE_FILE({path:i,buffer:Buffer.concat(t)},{success:o,error:s})}))}),c.on("error",function(e){var t=e.toString();void 0!==s?s(t):SHOW_ERROR("[USOCIAL] TWITTER_DOWNLOAD_PROFILE_IMAGE FAILED: "+t,r)})}}}),USOCIAL.TWITTER_GET_USER_DATA=METHOD({run:function(e,t){"use strict";var r=e.userId,n=e.token,o=e.tokenSecret;GET({isSecure:!0,host:"api.twitter.com",uri:"1.1/users/show.json",paramStr:"user_id="+r,headers:{Authorization:UOAUTH.GENERATE_AUTHORIZATION({url:"https://api.twitter.com/1.1/users/show.json",method:"GET",paramStr:"user_id="+r,consumerKey:NODE_CONFIG.USOCIAL.Twitter.consumerKey,consumerSecret:NODE_CONFIG.USOCIAL.Twitter.consumerSecret,token:n,tokenSecret:o})}},function(e){t(PARSE_STR(e))})}}),USOCIAL.TWITTER_REQUEST_TOKEN=METHOD({run:function(e){"use strict";UOAUTH.GET_TOKEN({url:"https://api.twitter.com/oauth/request_token",consumerKey:NODE_CONFIG.USOCIAL.Twitter.consumerKey,consumerSecret:NODE_CONFIG.USOCIAL.Twitter.consumerSecret},function(t){e(t.oauth_token)})}});